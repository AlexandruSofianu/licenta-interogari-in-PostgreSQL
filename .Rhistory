)
df <- rezultate |>
inner_join(interogari) |>
rename(resultset = `resultset_#`) |>
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
p3 <- ggscatterstats(
data = df,
x = resultset,
y = durata_sec,
type = "np"
)
df <- rezultate |>
rename(resultset = `resultset_#`) |>       # redenumire imediat pe dataframe-ul sursă
inner_join(interogari) |>                  # apoi join
select(-interogare_nr, -finalizare) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
rez1 <- read_csv("rezultatesf1.csv") |>
mutate(marime_bd = 1)
rez10 <- read_csv("rezultatesf10.csv") |>
mutate(marime_bd = 10)
rez100 <- read_csv("rezultatesf100.csv") |>
mutate(marime_bd = 100)
rezultate <- bind_rows(rez1, rez10, rez100)
names(rezultate)
df <- rezultate |>
rename(resultset = `resultset_#`) |>
mutate(
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
p3 <- ggscatterstats(
data = df,
x = resultset,
y = elapsed,
type = "np"
)
ggsave("06_scatter_resultset_vs_durata.png", plot = p3, width = 8, height = 5)
p4 <- ggscatterstats(
data = df,
x = nr_where,
y = durata_sec,
type = "np"
)
interogari <- read_csv("interogari jmeter TEST1.csv") |>
mutate(
query = str_replace_all(query, '\\n|\\r', ' '),
nr_where = str_count(tolower(query), " where "),
nr_join = str_count(tolower(query), " join "),
nr_group_by = str_count(tolower(query), " group by "),
interogare_nr = label
) |>
select(interogare_nr, nr_where, nr_join, nr_group_by)
interogari <- read_csv("interogari jmeter TEST1.csv") |>
mutate(
query = str_replace_all(query, '\\n|\\r', ' '),
nr_where = str_count(tolower(query), " where "),
nr_join = str_count(tolower(query), " join "),
nr_group_by = str_count(tolower(query), " group by "),
interogare_nr = label
) |>
select(interogare_nr, nr_where, nr_join, nr_group_by)
interogari <- read_csv("interogari jmeter TEST1.csv") |>
mutate(
query = str_replace_all(query, '\\n|\\r', ' '),
nr_where = str_count(tolower(query), " where "),
nr_join = str_count(tolower(query), " join "),
nr_group_by = str_count(tolower(query), " group by "),
interogare_nr = paste0("Q", sprintf("%03d", row_number()))
) |>
select(interogare_nr, nr_where, nr_join, nr_group_by)
rez1 <- read_csv("rezultatesf1.csv") |> mutate(marime_bd = 1)
rez10 <- read_csv("rezultatesf10.csv") |> mutate(marime_bd = 10)
rez100 <- read_csv("rezultatesf100.csv") |> mutate(marime_bd = 100)
rezultate <- bind_rows(rez1, rez10, rez100)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
rez1 <- read_csv("rezultatesf1.csv") |> mutate(marime_bd = 1)
rez10 <- read_csv("rezultatesf10.csv") |> mutate(marime_bd = 10)
rez100 <- read_csv("rezultatesf100.csv") |> mutate(marime_bd = 100)
rezultate <- bind_rows(rez1, rez10, rez100)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
rez1 <- read_csv("rezultatesf1.csv") |> mutate(marime_bd = 1)
rez10 <- read_csv("rezultatesf10.csv") |> mutate(marime_bd = 10)
rez100 <- read_csv("rezultatesf100.csv") |> mutate(marime_bd = 100)
rezultate <- bind_rows(rez1, rez10, rez100)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
rezultate <- bind_rows(rez1, rez10, rez100) |>
rename(interogare_nr = label)  # <- redenumește ca să poți face join
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
p4 <- ggscatterstats(
data = df,
x = nr_where,
y = durata_sec,
type = "np"
)
ggsave("08_scatter_where_vs_durata.png", plot = p4, width = 8, height = 5)
df <- df |>
mutate(fol_group = ifelse(nr_group_by > 0, "da", "nu"))
p5 <- ggbetweenstats(
data = df,
x = fol_group,
y = durata_sec,
type = "np"
)
ggsave("09_boxplot_groupby_vs_durata.png", plot = p5, width = 8, height = 5)
df <- rezultate |>
inner_join(interogari) |>
select(-interogare_nr, -finalizare) |>
mutate(log10_durata = log10(durata_sec)) |>
mutate(marime_bd = factor(marime_bd)
lm1 <- lm (log10_durata ~ ., data = df |> select (-durata_sec))
df <- rezultate |>
inner_join(interogari) |>
select(-interogare_nr, -finalizare) |>
mutate(log10_durata = log10(durata_sec)) |>
mutate(marime_bd = factor(marime_bd))
df <- rezultate |>
inner_join(interogari) |>
select(-interogare_nr, -finalizare) |>
mutate(log10_durata = log10(durata_sec)) |>
mutate(marime_bd = factor(marime_bd))
df <- rezultate |>
inner_join(interogari) |>
select(-interogare_nr) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
inner_join(interogari) |>
select(-interogare_nr) |>
mutate(
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
select(-interogare_nr) |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
lm1 <- lm(log10_durata ~ ., data = df |> select(-durata_sec))
summary(df$marime_bd)
interogari <- read_csv("interogari jmeter TEST1.csv") |>
mutate(
query = str_replace_all(query, '\\n|\\r', ' '),
nr_where = str_count(tolower(query), " where "),
nr_join = str_count(tolower(query), " join "),
nr_group_by = str_count(tolower(query), " group by "),
interogare_nr = paste0("Q", sprintf("%03d", row_number()))
) |>
select(interogare_nr, nr_where, nr_join, nr_group_by)
rez1 <- read_csv("rezultatesf1.csv") |> mutate(marime_bd = 1)
rez10 <- read_csv("rezultatesf10.csv") |> mutate(marime_bd = 10)
rez100 <- read_csv("rezultatesf100.csv") |> mutate(marime_bd = 100)
rezultate <- bind_rows(rez1, rez10, rez100) |>
rename(interogare_nr = label)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
)
lm1 <- lm(log10_durata ~ ., data = df |> select(-durata_sec))
df_check <- df |> select(-durata_sec)
sapply(df_check, function(col) {
if (is.factor(col)) nlevels(col) else NA
})
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
df_valid <- df |>
select(-durata_sec) |>
select(where(~ !is.factor(.) || nlevels(.) > 1))
lm1 <- lm(log10_durata ~ ., data = df_valid)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
df_valid <- df |>
select(-durata_sec)
# elimină coloanele factor cu un singur nivel
cols_valid <- sapply(df_valid, function(col) {
!is.factor(col) || nlevels(col) > 1
})
df_valid <- df_valid[, cols_valid]
lm1 <- lm(log10_durata ~ ., data = df_valid)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
df_valid <- df |>
select(-durata_sec)
# elimină coloanele factor cu un singur nivel
cols_valid <- sapply(df_valid, function(col) {
!is.factor(col) || nlevels(col) > 1
})
df_valid <- df_valid[, cols_valid]
lm1 <- lm(log10_durata ~ ., data = df_valid)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
df_valid <- df |>
select(-durata_sec)
cols_valid <- sapply(df_valid, function(col) {
!is.factor(col) || nlevels(col) > 1
})
df_valid <- df_valid[, cols_valid]
lm1 <- lm(log10_durata ~ ., data = df_valid)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
df_valid <- df |>
select(-durata_sec)
cols_valid <- sapply(df_valid, function(col) {
!is.factor(col) || nlevels(col) > 1
})
df_valid <- df_valid[, cols_valid]
lm1 <- lm(log10_durata ~ ., data = df_valid)
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
df_valid <- df |> select(-durata_sec)
cols_valid <- names(df_valid)[sapply(df_valid, function(col) {
!is.factor(col) || (is.factor(col) && nlevels(col) > 1)
})]
df_valid <- df_valid[, cols_valid]
lm1 <- lm(log10_durata ~ ., data = df_valid)
# reconstruiește df complet
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
# excludem durata_sec
df_valid <- df |> select(-durata_sec)
# filtrăm coloanele factor cu >= 2 niveluri sau non-factor
df_valid <- df_valid[, sapply(df_valid, function(col) {
!is.factor(col) || (is.factor(col) && nlevels(col) >= 2)
})]
# rulează regresia pe coloanele valide
lm1 <- lm(log10_durata ~ ., data = df_valid)
# reconstruim complet df cu toate coloanele utile
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(elapsed),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
# excludem durata_sec
df_valid <- df |> select(-durata_sec)
# filtrăm coloanele: păstrăm doar cele care NU sunt factor sau sunt factori cu 2+ niveluri
col_valid <- sapply(df_valid, function(col) {
!is.factor(col) || (is.factor(col) && nlevels(col) >= 2)
})
# păstrăm doar coloanele valide
df_valid <- df_valid[, col_valid]
# rulăm modelul de regresie
lm1 <- lm(log10_durata ~ ., data = df_valid)
df <- rezultate |>
inner_join(interogari) |>
select(-interogare_nr, -finalizare) |>
mutate(log10_durata = log10(durata_sec)) |>
mutate(marime_bd = factor(marime_bd))
# reconstruim df corect
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
# scoatem durata_sec, păstrăm restul
df_valid <- df |> select(-durata_sec)
# eliminăm coloanele factor cu 1 singur nivel
col_valid <- sapply(df_valid, function(col) {
!is.factor(col) || (is.factor(col) && nlevels(col) > 1)
})
# filtrăm coloanele valide
df_valid <- df_valid[, col_valid]
# modelul final
lm1 <- lm(log10_durata ~ ., data = df_valid)
# reconstruim df curat
df <- rezultate |>
inner_join(interogari, by = "interogare_nr") |>
mutate(
durata_sec = elapsed,
log10_durata = log10(durata_sec),
marime_bd = factor(marime_bd)
) |>
filter(!is.na(log10_durata))
# scoatem durata_sec
df_valid <- df |> select(-durata_sec)
# identificăm doar coloanele valide (ne-factor sau factor cu >=2 niveluri)
col_valid_names <- names(df_valid)[sapply(df_valid, function(col) {
!is.factor(col) || (is.factor(col) && nlevels(col) >= 2)
})]
# selectăm doar coloanele valide
df_valid <- df_valid[, col_valid_names]
# modelul final
lm1 <- lm(log10_durata ~ ., data = df_valid)
